{"ast":null,"code":"/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\nvar _a;\n\nimport { __extends } from \"tslib\";\nimport TelemetryEvent from \"./TelemetryEvent\";\nimport { TELEMETRY_BLOB_EVENT_NAMES } from \"./TelemetryConstants\";\nimport { scrubTenantFromUri, hashPersonalIdentifier, prependEventNamePrefix } from \"./TelemetryUtils\";\nexport var EVENT_KEYS = {\n  AUTHORITY: prependEventNamePrefix(\"authority\"),\n  AUTHORITY_TYPE: prependEventNamePrefix(\"authority_type\"),\n  PROMPT: prependEventNamePrefix(\"ui_behavior\"),\n  TENANT_ID: prependEventNamePrefix(\"tenant_id\"),\n  USER_ID: prependEventNamePrefix(\"user_id\"),\n  WAS_SUCESSFUL: prependEventNamePrefix(\"was_successful\"),\n  API_ERROR_CODE: prependEventNamePrefix(\"api_error_code\"),\n  LOGIN_HINT: prependEventNamePrefix(\"login_hint\")\n};\nexport var API_CODE;\n\n(function (API_CODE) {\n  API_CODE[API_CODE[\"AcquireTokenRedirect\"] = 2001] = \"AcquireTokenRedirect\";\n  API_CODE[API_CODE[\"AcquireTokenSilent\"] = 2002] = \"AcquireTokenSilent\";\n  API_CODE[API_CODE[\"AcquireTokenPopup\"] = 2003] = \"AcquireTokenPopup\";\n  API_CODE[API_CODE[\"LoginRedirect\"] = 2004] = \"LoginRedirect\";\n  API_CODE[API_CODE[\"LoginPopup\"] = 2005] = \"LoginPopup\";\n  API_CODE[API_CODE[\"Logout\"] = 2006] = \"Logout\";\n})(API_CODE || (API_CODE = {}));\n\nexport var API_EVENT_IDENTIFIER;\n\n(function (API_EVENT_IDENTIFIER) {\n  API_EVENT_IDENTIFIER[\"AcquireTokenRedirect\"] = \"AcquireTokenRedirect\";\n  API_EVENT_IDENTIFIER[\"AcquireTokenSilent\"] = \"AcquireTokenSilent\";\n  API_EVENT_IDENTIFIER[\"AcquireTokenPopup\"] = \"AcquireTokenPopup\";\n  API_EVENT_IDENTIFIER[\"LoginRedirect\"] = \"LoginRedirect\";\n  API_EVENT_IDENTIFIER[\"LoginPopup\"] = \"LoginPopup\";\n  API_EVENT_IDENTIFIER[\"Logout\"] = \"Logout\";\n})(API_EVENT_IDENTIFIER || (API_EVENT_IDENTIFIER = {}));\n\nvar mapEventIdentiferToCode = (_a = {}, _a[API_EVENT_IDENTIFIER.AcquireTokenSilent] = API_CODE.AcquireTokenSilent, _a[API_EVENT_IDENTIFIER.AcquireTokenPopup] = API_CODE.AcquireTokenPopup, _a[API_EVENT_IDENTIFIER.AcquireTokenRedirect] = API_CODE.AcquireTokenRedirect, _a[API_EVENT_IDENTIFIER.LoginPopup] = API_CODE.LoginPopup, _a[API_EVENT_IDENTIFIER.LoginRedirect] = API_CODE.LoginRedirect, _a[API_EVENT_IDENTIFIER.Logout] = API_CODE.Logout, _a);\n\nvar ApiEvent =\n/** @class */\nfunction (_super) {\n  __extends(ApiEvent, _super);\n\n  function ApiEvent(correlationId, piiEnabled, apiEventIdentifier) {\n    var _this = _super.call(this, prependEventNamePrefix(\"api_event\"), correlationId, apiEventIdentifier) || this;\n\n    if (apiEventIdentifier) {\n      _this.apiCode = mapEventIdentiferToCode[apiEventIdentifier];\n      _this.apiEventIdentifier = apiEventIdentifier;\n    }\n\n    _this.piiEnabled = piiEnabled;\n    return _this;\n  }\n\n  Object.defineProperty(ApiEvent.prototype, \"apiEventIdentifier\", {\n    set: function set(apiEventIdentifier) {\n      this.event[TELEMETRY_BLOB_EVENT_NAMES.ApiTelemIdConstStrKey] = apiEventIdentifier;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"apiCode\", {\n    set: function set(apiCode) {\n      this.event[TELEMETRY_BLOB_EVENT_NAMES.ApiIdConstStrKey] = apiCode;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"authority\", {\n    set: function set(uri) {\n      this.event[EVENT_KEYS.AUTHORITY] = scrubTenantFromUri(uri).toLowerCase();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"apiErrorCode\", {\n    set: function set(errorCode) {\n      this.event[EVENT_KEYS.API_ERROR_CODE] = errorCode;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"tenantId\", {\n    set: function set(tenantId) {\n      this.event[EVENT_KEYS.TENANT_ID] = this.piiEnabled && tenantId ? hashPersonalIdentifier(tenantId) : null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"accountId\", {\n    set: function set(accountId) {\n      this.event[EVENT_KEYS.USER_ID] = this.piiEnabled && accountId ? hashPersonalIdentifier(accountId) : null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"wasSuccessful\", {\n    get: function get() {\n      return this.event[EVENT_KEYS.WAS_SUCESSFUL] === true;\n    },\n    set: function set(wasSuccessful) {\n      this.event[EVENT_KEYS.WAS_SUCESSFUL] = wasSuccessful;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"loginHint\", {\n    set: function set(loginHint) {\n      this.event[EVENT_KEYS.LOGIN_HINT] = this.piiEnabled && loginHint ? hashPersonalIdentifier(loginHint) : null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"authorityType\", {\n    set: function set(authorityType) {\n      this.event[EVENT_KEYS.AUTHORITY_TYPE] = authorityType.toLowerCase();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ApiEvent.prototype, \"promptType\", {\n    set: function set(promptType) {\n      this.event[EVENT_KEYS.PROMPT] = promptType.toLowerCase();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return ApiEvent;\n}(TelemetryEvent);\n\nexport default ApiEvent;","map":null,"metadata":{},"sourceType":"module"}
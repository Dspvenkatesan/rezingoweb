{"ast":null,"code":"/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\nimport { __assign } from \"tslib\";\nimport { ResponseTypes, ServerHashParamKeys } from \"./Constants\";\n/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n/**\n * @hidden\n */\n\nvar ResponseUtils =\n/** @class */\nfunction () {\n  function ResponseUtils() {}\n\n  ResponseUtils.setResponseIdToken = function (originalResponse, idTokenObj) {\n    if (!originalResponse) {\n      return null;\n    } else if (!idTokenObj) {\n      return originalResponse;\n    }\n\n    var exp = Number(idTokenObj.expiration);\n\n    if (exp && !originalResponse.expiresOn) {\n      originalResponse.expiresOn = new Date(exp * 1000);\n    }\n\n    return __assign(__assign({}, originalResponse), {\n      idToken: idTokenObj,\n      idTokenClaims: idTokenObj.claims,\n      uniqueId: idTokenObj.objectId || idTokenObj.subject,\n      tenantId: idTokenObj.tenantId\n    });\n  };\n\n  ResponseUtils.buildAuthResponse = function (idToken, authResponse, serverAuthenticationRequest, account, scopes, accountState) {\n    switch (serverAuthenticationRequest.responseType) {\n      case ResponseTypes.id_token:\n        var idTokenResponse = __assign(__assign({}, authResponse), {\n          tokenType: ServerHashParamKeys.ID_TOKEN,\n          account: account,\n          scopes: scopes,\n          accountState: accountState\n        });\n\n        idTokenResponse = ResponseUtils.setResponseIdToken(idTokenResponse, idToken);\n        return idTokenResponse.idToken ? idTokenResponse : null;\n\n      case ResponseTypes.id_token_token:\n        var idTokeTokenResponse = ResponseUtils.setResponseIdToken(authResponse, idToken);\n        return idTokeTokenResponse && idTokeTokenResponse.accessToken && idTokeTokenResponse.idToken ? idTokeTokenResponse : null;\n\n      case ResponseTypes.token:\n        var tokenResponse = ResponseUtils.setResponseIdToken(authResponse, idToken);\n        return tokenResponse;\n\n      default:\n        return null;\n    }\n  };\n\n  return ResponseUtils;\n}();\n\nexport { ResponseUtils };","map":null,"metadata":{},"sourceType":"module"}